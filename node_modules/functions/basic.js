var request = require('request');
var mongoose = require('mongoose'); 
var Contacts = require('models/contacts');

var rgstrdcontacts = function (tp,callback) {
	
	var details;
	Contacts.find({ tp:tp}, function(err, contact) {
        if (err) throw err;
        if(contact.length!=0)
        {
	      
				callback({'respond':contact});	        
    	}
    	else
        {

    		  var respond={error:'Invalid Number'};
    		  callback({'respond':respond});
    		

    	}
    	

     });

			
   
}

var addcontact = function (newcontact,callback) {
     
    var msgs={msg:'Succefully Added'};
    var count = Object.keys(newcontact).length;
   
      if(count!=3)
    {
        msgs={msg:'Please fill all the fields to add the contact'};
        callback({'msgs':msgs});
    }
    else{
    Contacts.create(newcontact, function(err, res) {
        if (err) throw err;
        else callback({'msgs':msgs});
      
     });
    }

            
   
}

var removecontact = function (id,callback) {

    Contacts.remove({_id:id}, function(err,count) {
        if (err) throw err;
         
        var respond={error:'Succefully Removed the contact'};
        callback({'respond':respond});
       

     });

            
   
}

   
module.exports = {
  removecontact: removecontact,
  addcontact:addcontact,
  rgstrdcontacts:rgstrdcontacts
  


}